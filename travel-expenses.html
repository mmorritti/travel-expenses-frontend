<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <title>Dettaglio Viaggio</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <link rel="stylesheet" href="https://npmcdn.com/flatpickr/dist/themes/airbnb.css">

    <link rel="stylesheet" href="/src/style.css?v=2" />
    <style>
      .no-scrollbar::-webkit-scrollbar { display: none; }
      .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-5px); }
        to { opacity: 1; transform: translateY(0); }
      }
      .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }
      @keyframes slideInRight { from { opacity: 0; transform: translateX(20px); } to { opacity: 1; transform: translateX(0); } }
      @keyframes slideInLeft { from { opacity: 0; transform: translateX(-20px); } to { opacity: 1; transform: translateX(0); } }
      .animate-slide-right { animation: slideInRight 0.2s ease-out forwards; }
      .animate-slide-left { animation: slideInLeft 0.2s ease-out forwards; }
    </style>
  </head>

  <body class="bg-gray-50 text-gray-800 min-h-screen flex flex-col font-sans antialiased pb-safe">
    
    <div class="sticky top-0 z-50 bg-sky-300 shadow-md">
        <header class="px-4 py-3 flex items-center justify-between relative h-[70px]">
          <button id="back-btn" class="relative z-30 w-10 h-10 flex items-center justify-center bg-white/20 backdrop-blur-sm rounded-full text-sky-900 hover:bg-white/40 transition flex-shrink-0 active:scale-95">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-5 h-5">
              <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18" />
            </svg>
          </button>

          <div class="absolute inset-0 flex flex-col items-center justify-center pointer-events-none px-16 z-10">
            <h1 id="travel-name" class="text-lg font-bold text-slate-900 leading-tight truncate w-full text-center">Caricamento...</h1>
            <p id="travel-dates" class="text-[10px] font-bold text-slate-700 opacity-70 mt-0.5 truncate w-full text-center uppercase tracking-wide">--</p>
          </div>

          <div id="header-total-section" class="relative z-30 text-right flex flex-col items-end hidden animate-fade-in">
            <span class="text-lg font-black text-slate-900 leading-none bg-sky-400/20 backdrop-blur-md rounded-lg px-2 py-1"> 
                <span id="header-total-amount">0.00</span>
                <span id="header-total-currency" class="text-[10px] font-bold opacity-80">???</span>
            </span>
            <div id="header-converted-box" class="mt-1 hidden">
              <span class="bg-white/50 px-1.5 py-0.5 rounded text-[9px] font-bold text-slate-800 backdrop-blur-sm shadow-sm whitespace-nowrap">
                â‰ˆ <span id="header-total-home">0.00</span> EUR
              </span>
            </div>
          </div>
        </header>
    </div>

    <main id="tab-content" class="flex-1 overflow-y-auto no-scrollbar p-4 pb-32">
       </main>

    <button id="fab-add-expense" class="fixed bottom-24 right-5 z-40 bg-sky-500 text-white w-14 h-14 rounded-full shadow-lg flex items-center justify-center active:scale-90 transition-transform hover:bg-sky-600 focus:outline-none">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" class="w-8 h-8">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
        </svg>
    </button>

    <nav class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 shadow-[0_-4px_20px_rgba(0,0,0,0.05)] px-8 py-2 flex justify-between items-center z-50 pb-safe safe-area-bottom">
      <button class="nav-btn group flex flex-col items-center gap-1 w-16 active" data-tab="list">
        <div class="icon-container w-10 h-8 rounded-xl flex items-center justify-center transition-all duration-300 group-[.active]:bg-sky-100 group-[.active]:text-sky-600 text-gray-400">
           <span class="text-xl filter grayscale group-[.active]:grayscale-0 transition-all">ðŸ’¸</span>
        </div>
        <span class="text-[10px] font-bold text-gray-400 group-[.active]:text-sky-600 transition-colors">Spese</span>
      </button>
      <button class="nav-btn group flex flex-col items-center gap-1 w-16" data-tab="chart">
        <div class="icon-container w-10 h-8 rounded-xl flex items-center justify-center transition-all duration-300 group-[.active]:bg-sky-100 group-[.active]:text-sky-600 text-gray-400">
           <span class="text-xl filter grayscale group-[.active]:grayscale-0 transition-all">ðŸ“Š</span>
        </div>
        <span class="text-[10px] font-bold text-gray-400 group-[.active]:text-sky-600 transition-colors">Grafico</span>
      </button>
      <button class="nav-btn group flex flex-col items-center gap-1 w-16" data-tab="fx">
        <div class="icon-container w-10 h-8 rounded-xl flex items-center justify-center transition-all duration-300 group-[.active]:bg-sky-100 group-[.active]:text-sky-600 text-gray-400">
           <span class="text-xl filter grayscale group-[.active]:grayscale-0 transition-all">ðŸ’±</span>
        </div>
        <span class="text-[10px] font-bold text-gray-400 group-[.active]:text-sky-600 transition-colors">Cambio</span>
      </button>
    </nav>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://npmcdn.com/flatpickr/dist/l10n/it.js"></script>

    <script type="module" src="/src/travel-expenses.js?v=2"></script>
  </body>
</html>